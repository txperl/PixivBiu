<!DOCTYPE HTML>
<!--
    Multiverse by HTML5 UP
    html5up.net | @ajlkn
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
    <title>PixivBiu</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1,
            user-scalable=no" />
    <link type="favicon" rel="shortcut icon" href="static/pixiv.png">
    <link rel="stylesheet" href="static/multiverse/assets/css/main.css" />
    <link rel="stylesheet" href="static/multiverse/assets/css/nprogress.css" />
    <noscript>
        <link rel="stylesheet" href="static/multiverse/assets/css/noscript.css" />
    </noscript>
    <link rel="stylesheet" href="static/multiverse/assets/css/tooltipster.bundle.min.css" />
    <link rel="stylesheet" href="static/multiverse/assets/css/tooltipster.theme.min.css" />
    <link rel="stylesheet" href="static/multiverse/assets/css/n.css" />
</head>

<body class="is-preload" style="padding: 0 50px;">
    <div class="search-area">
        <div class="bar">
            <input id="srhBox" class="tooltip" placeholder="Biu~" autocomplete="off" title="æœç´¢ Â· å›è½¦æ‰§è¡Œ">
        </div>
    </div>

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
        <header id="header">
            <h1><a href="./"><strong>PixivBiu</strong>@v2</a></h1>
            <h1 id="progressDownloadingPics"></h1>
            <nav>
                <ul id="rstHeaderShow">
                    <li><a class="label-btn-filter" href="#filter">ç­›é€‰</a></li>
                    <li><a href="#setting">è®¾ç½®</a></li>
                    <li><a href="#about" class="icon solid fa-info-circle">å…³äº</a></li>
                </ul>
            </nav>
        </header>

        <!-- Main -->
        <div id="main">
            <article id="codeBox" class="thumb">
                <a href="javascript: void(0);" class="imageBtn pop_ctrl"><img
                        src="static/multiverse/images/thumbs/01.jpg" /></a>
                <h2>å»ºè®®</h2>
                <ul>
                    <li>Biu ä¸ºæœç´¢æ¡†</li>
                    <li>è¾“å…¥ @ å¯ä»¥è¿›å…¥æŒ‡ä»¤æ¨¡å¼</li>
                    <br>
                    <li style="display: block; color: rgb(255, 255, 255); width: 100%; text-align: right; padding: 0px 10px; font-size: 1.1em; font-weight: 400; cursor: default;"
                        v-for="advice in advice_block_list">[[ advice ]]</li>
                </ul>
            </article>
            <article id="rankBox" class="thumb">
                <a href="javascript: void(0);" class="imageBtn pop_ctrl"><img
                        src="static/multiverse/images/thumbs/02.jpg" /></a>
                <h2>æ’è¡Œæ¦œ</h2>
                <ul>
                    <li><a href="javascript: getRank('day');">æ—¥å›¾</a></li>
                    <li><a href="javascript: getRank('week');">å‘¨å›¾</a></li>
                    <li><a href="javascript: getRank('month');">æœˆå›¾</a></li>
                    <li><a href="javascript: getRank('day_manga');">æ—¥æ¼«</a></li>
                    <li><a href="javascript: getRank('week_manga');">å‘¨æ¼«</a></li>
                    <li><a href="javascript: getRank('month_manga');">æœˆæ¼«</a></li>
                    <li><a href="javascript: getRank('day_r18');">æ—¥R18</a></li>
                    <li><a href="javascript: getRank('week_r18');">å‘¨R18</a></li>
                    <li><a href="javascript: getRank('week_original');">å‘¨æ–°å›¾</a></li>
                    <li><a href="javascript: getRank('week_rookie');">å‘¨æ–°äºº</a></li>
                </ul>
            </article>
            <article id="myBox" class="thumb">
                <a class="imageBtn pop_ctrl"><img src="static/multiverse/images/thumbs/03.jpg" /></a>
                <h2>æˆ‘çš„</h2>
                <ul>
                    <li><a href="javascript: getMarks();">æ”¶è—@å…¬å¼€</a></li>
                    <li><a href="javascript: getMarks('my');">æ”¶è—@éšè—</a></li>
                    <li><a href="javascript: getFollowing();">å·²å…³æ³¨ç”¨æˆ·@å…¬å¼€</a></li>
                    <li><a href="javascript: getFollowing('my');">å·²å…³æ³¨ç”¨æˆ·@éšè—</a></li>
                    <li><a href="javascript: getNewToMe();">å·²å…³æ³¨ç”¨æˆ·çš„æ–°ä½œ@å…¬å¼€</a></li>
                    <li><a href="javascript: getNewToMe('private');">å·²å…³æ³¨ç”¨æˆ·çš„æ–°ä½œ@éšè—</a></li>
                    <li><a href="javascript: getRecommend('illust');">æ¨è@æ’ç”»</a></li>
                    <li><a href="javascript: getRecommend('manga');">æ¨è@æ¼«ç”»</a></li>
                </ul>
            </article>
            <article class="thumb">
                <input id="image-input" type="file" accept="image/*" @change="searchImage($event)" hidden>
                <a id="preview-searchImage" href="javascript: void(0);" class="imageBtn"
                    @click="$('#image-input').click()"><img src="static/multiverse/images/thumbs/04.jpg" /></a>
                <h2 id="title-block-searchImage">å›¾ç‰‡æœç´¢</h2>
            </article>
        </div>

        <div id="filter" class="panel">
            <div class="inner split">
                <div class="filters">
                    <section>
                        <h2>å±æ€§</h2>
                        <div class="grid-3">
                            <input id="filtersImageWidth" class="tooltip" placeholder="å®½åº¦" autocomplete="off"
                                title="å®½åº¦èŒƒå›´ï¼Œå¦‚ 100:200 æˆ– 100: æˆ– :200">
                            <input id="filtersImageHeight" class="tooltip" placeholder="é«˜åº¦" autocomplete="off"
                                title="é«˜åº¦èŒƒå›´ï¼Œå¦‚ 100:200 æˆ– 100: æˆ– :200">
                            <input id="filtersImageWidthHeightRate" class="tooltip" placeholder="å®½é«˜æ¯”" autocomplete="off"
                                title="å®½é«˜æ¯”èŒƒå›´ï¼Œä»¥ / è¡¨ç¤ºæ¯”ï¼Œä»¥ : è¡¨ç¤ºèŒƒå›´ï¼Œå¦‚ 1/1:4/3 æˆ– 1/1: æˆ– :4/3">
                        </div>
                        <div class="grid-3">
                            <input id="filtersNumBookmark" class="tooltip" placeholder="æ”¶è—æ•°" autocomplete="off"
                                title="æ”¶è—æ•°èŒƒå›´ï¼Œå¦‚ 100:200 æˆ– 100: æˆ– :200">
                            <input id="filtersNumView" class="tooltip" placeholder="æµè§ˆæ•°" autocomplete="off"
                                title="æµè§ˆæ•°èŒƒå›´ï¼Œå¦‚ 100:200 æˆ– 100: æˆ– :200">
                            <input id="filtersImageTime" class="tooltip" placeholder="å‘å¸ƒæ—¶é—´" autocomplete="off"
                                title="å‘å¸ƒæ—¶é—´èŒƒå›´ï¼Œå¦‚ 2020-03-13:2022-03-13 æˆ– start: æˆ– :end">
                        </div>
                    </section>
                    <section>
                        <h2>ç±»åˆ«</h2>
                        <div class="grid-3">
                            <input id="filtersImageType" class="tooltip" placeholder="ç±»å‹" autocomplete="off"
                                title="ä½œå“çš„ç±»å‹ï¼Œå¯å¡«å…¥ i(æ’å›¾), m(æ¼«ç”»), u(åŠ¨å›¾), o(å…¶ä»–)ï¼Œå°¾éƒ¨æ·»åŠ  s åˆ™ä»…æ˜¾ç¤ºå¤šå›¾ï¼Œæ·»åŠ  o åˆ™ä»…æ˜¾ç¤ºå•å›¾ã€‚å¤šä¸ªç±»å‹ä»¥é€—å·éš”å¼€ï¼Œå¦‚ i, ms, oo">
                            <input id="filtersNameTag" class="tooltip" placeholder="æ ‡ç­¾å…³é”®è¯" autocomplete="off"
                                title="æ ‡ç­¾ä¸­å¿…é¡»åŒ…å«å…¨éƒ¨å…³é”®è¯ï¼Œå¤šä¸ªæ ‡ç­¾ä»¥é€—å·éš”å¼€ï¼Œä»¥ ! æ„Ÿå¹å·å¼€å¤´åˆ™æ’é™¤æ­¤æ ‡ç­¾ï¼Œå¦‚ tag1, !tag2">
                            <input id="filtersRankDate" class="tooltip" placeholder="æ’è¡Œæ¦œæ—¥æœŸ" autocomplete="off"
                                title="ä»…å¯¹æ’è¡Œæ¦œæœ‰æ•ˆï¼ŒæŸ¥çœ‹æŒ‡å®šæ—¥æœŸçš„æ•°æ®ï¼Œå¦‚ 2022-03-24">
                        </div>
                    </section>
                </div>
                <div class="filters">
                    <section>
                        <h2>æœç´¢</h2>
                        <div>
                            <input id="settingsPageNum" class="tooltip" placeholder="æ¯ç»„é¡µæ•°" autocomplete="off"
                                title="å•æ¬¡æœç´¢çš„é¡µæ•°ï¼Œå»ºè®®ä¸è¦è¿‡å¤§">
                            <input id="settingsSearchMode" class="tooltip" placeholder="æœç´¢æ¨¡å¼" autocomplete="off"
                                title="tag: éƒ¨åˆ†æ ‡ç­¾åŒ¹é…ï¼ˆé»˜è®¤ï¼‰ï¼Œotag: å…¨æ ‡ç­¾åŒ¹é…ï¼Œdes: æ ‡é¢˜æˆ–æè¿°åŒ¹é…">
                            <input id="settingsSortMode2" class="tooltip" placeholder="æ’åºæ¨¡å¼" autocomplete="off"
                                title="0: æŒ‰æ”¶è—æ•°é™åºï¼Œ1: æŒ‰æµè§ˆæ•°é™åºï¼Œ2: æŒ‰æ—¥æœŸé™åºï¼Œ3: æŒ‰æ—¥æœŸå‡åºï¼Œ4: æŒ‰æ”¶è—ä¸æµè§ˆæ•°çš„æ¯”å€¼é™åºã€‚åœ¨å…¶ååŠ  s å¯ä¸ºæ‰€æœ‰ç»“æœæ’åºï¼Œå¦‚ 0 æˆ– 0s">
                            <input id="settingsIsAiWork" class="tooltip" placeholder="AI ä½œå“" autocomplete="off"
                                title="æ˜¯å¦æ˜¾ç¤º AI ä½œå“ã€‚on: å¼€å¯ï¼Œoff: å…³é—­">
                        </div>
                        <p>æœç´¢å—ä»¥å¤–çš„ç­›é€‰é¡¹ç•™ç©ºæ—¶ä¸ºå–æ¶ˆã€‚</p>
                    </section>
                    <section>
                        <button class="primary"
                            onclick="javascript: saveFiltersCookie(); saveSettingsCookie(); grpActChon('now');">ä¿å­˜</button>
                        <button class="primary" onclick="javascript: saveFiltersCookie(true, {
                            ...filtersMods,
                            '#settingsPageNum': settingsMods['#settingsPageNum'],
                            '#settingsSearchMode': settingsMods['#settingsSearchMode'],
                            '#settingsSortMode2': settingsMods['#settingsSortMode2'],
                            '#settingsIsAiWork': settingsMods['#settingsIsAiWork'],
                        }); loadSearchSettings(); grpActChon('now');">é‡ç½®</button>
                    </section>
                </div>
            </div>
        </div>

        <div id="setting" class="panel">
            <div class="inner split">
                <div class="filters">
                    <section>
                        <h2>å›¾ç‰‡</h2>
                        <div>
                            <input id="settingsIsOriPic" class="tooltip" placeholder="å¤§å›¾é¢„è§ˆ" autocomplete="off"
                                title="åœ¨å›¾ç‰‡è¯¦æƒ…é¡µæ˜¾ç¤ºè¾ƒå¤§å°ºå¯¸çš„å›¾ç‰‡ã€‚on: å¼€å¯ï¼Œoff: å…³é—­ï¼ˆè‹¥å›¾ç‰‡åŠ è½½æ—¶é—´è¿‡é•¿ï¼Œå»ºè®®å…³é—­ï¼‰">
                            <input id="settingsRvrProxyUrl" class="tooltip" placeholder="å›¾ç‰‡åä»£åœ°å€" autocomplete="off"
                                title="Pixiv å‰ç«¯å›¾ç‰‡åå‘ä»£ç†åœ°å€ï¼Œä»¥ http(s):// å¼€å¤´">
                        </div>
                    </section>
                    <section>
                        <h2>åŠŸèƒ½</h2>
                        <div>
                            <input id="settingsActionType" class="tooltip" placeholder="æ“ä½œç±»å‹" autocomplete="off"
                                title="public: å½“è¿›è¡Œæ”¶è—ã€å…³æ³¨ç­‰æ“ä½œæ—¶é»˜è®¤æ”¾å…¥å…¬å¼€ç±»åˆ«ï¼›private: ç§äººç±»åˆ«">
                            <input id="settingsIsR18" class="tooltip" placeholder="R18 å†…å®¹" autocomplete="off"
                                title="æ˜¯å¦å±•ç¤º R18 å†…å®¹ã€‚on: å¼€å¯ï¼Œoff: é®è”½ï¼Œgone: ä¸æ˜¾ç¤ºï¼Œonly: ä»…å±•ç¤º">
                        </div>
                        <p>è‹¥æ‰€æœ‰æ“ä½œéƒ½æ²¡æœ‰ç»“æœï¼Œå¯ä»¥å°è¯•ç‚¹å‡»<a id="btnUpdateToken" class="tooltip" title="ä¸è¦é¢‘ç¹ç‚¹å“¦"
                                href="javascript: doUpdateToken();">è¿™é‡Œ</a>ä»¥æ‰‹åŠ¨æ›´æ–° Token çŠ¶æ€ã€‚</p>
                    </section>
                </div>
                <div class="filters">
                    <section>
                        <h2>å…¶ä»–</h2>
                        <button style="margin: 5px 0;" class="primary"
                            onclick="javascript: saveSettingsCookie();">ä¿å­˜</button>
                        <button class="primary" onclick="javascript: saveSettingsCookie(true, settingsMods,
                            ['#settingsIsOriPic', '#settingsIsR18', '#settingsActionType', '#settingsRvrProxyUrl']);
                            loadSearchSettings();">é‡ç½®</button>
                    </section>
                </div>
            </div>
        </div>

        <!-- About -->
        <div id="about" class="panel">
            <div class="inner split">
                <div>
                    <section>
                        <h2>PixivBiu@<span id="hint-current-verson">Unknown</span></h2>
                        <p>ä¸€æ¬¾ä¸é”™çš„ Pixiv æœç´¢<b>è¾…åŠ©</b>å·¥å…·ã€‚<br>åŸºäº Python@3.7(+) æ„å»ºã€‚</p>
                    </section>
                    <section>
                        <h2>ä¸€äº›é“¾æ¥</h2>
                        <ul class="icons">
                            <li>
                                <a target="_blank" href="https://github.com/txperl/PixivBiu"
                                    class="icon brands fa-github"><span class="label">GitHub</span></a>
                            </li>
                            <li>
                                <a target="_blank" href="https://biu.tls.moe/" class="icon solid fa-air-freshener"><span
                                        class="label">Official</span></a>
                            </li>
                            <li>
                                <a target="_blank" href="mailto:txperl@gmail.com" class="icon solid fa-envelope"><span
                                        class="label">Email</span></a>
                            </li>
                        </ul>
                    </section>
                    <p class="copyright">
                        &copy;
                        <a target="_blank" href="https://tls.moe/">é“œé”£çƒ§è®¡åˆ’</a>.
                        <br>Created by <a target="_blank" href="https://yumoe.com/">Trii Hisa</a>.<br>Design by <a
                            target="_blank" href="https://html5up.net/">HTML5 UP</a>.
                    </p>
                </div>
                <div>
                    <section>
                        <h2>å…¶ä»–</h2>
                        <a target="_blank" href="https://biu.tls.moe/#/usage/basic">å¦‚ä½•ä½¿ç”¨?</a> & <a target="_blank"
                            href="mailto:txperl@gmail.com?subject=ã€ŒPixivBiuã€">åé¦ˆ</a><br><br>
                        <button id="btnCheckUP" onclick="checkOutdated();" class="primary tooltip"
                            title="BiuBiuBiu~">æ£€æµ‹æ›´æ–°</button><br><br>
                        <p>If you feel your rights have been violated, please contact me through the
                            information above. Sorry a lot.</p>
                    </section>
                </div>
            </div>
        </div>

    </div>

    <!-- Scripts -->
    <script src="static/multiverse/assets/js/jquery.min.js"></script>
    <script src="static/multiverse/assets/js/jquery.poptrox.min.js"></script>
    <script src="static/multiverse/assets/js/jquery.popmenu.min.js"></script>
    <script src="static/multiverse/assets/js/js.cookie.min.js"></script>
    <script src="static/multiverse/assets/js/browser.min.js"></script>
    <script src="static/multiverse/assets/js/breakpoints.min.js"></script>
    <script src="static/multiverse/assets/js/nprogress.js"></script>
    <script src="static/multiverse/assets/js/util.js"></script>
    <script src="static/multiverse/assets/js/main.js"></script>
    <script src="static/multiverse/assets/js/tooltipster.bundle.min.js"></script>
    <script src="static/multiverse/assets/js/vue.min.js"></script>
    <script src="static/multiverse/assets/js/axios.min.js"></script>
    <script src="static/multiverse/assets/js/biu/settings.js"></script>
    <script src="static/multiverse/assets/js/biu/statusMsg.js"></script>
    <script src="static/multiverse/assets/js/biu/actions.js"></script>
    <script src="static/multiverse/assets/js/biu/functions.js"></script>
    <script src="static/multiverse/assets/js/biu/blocks/blockMain.js"></script>
    <script>
        var tmpCode;
        var tmpPageData;
        var tmpSearchSettings = {};
        var tmpFilters = {};
        var downloadList = {};
        var biuInfo = { pPximgRProxyURL: "https://i.pixiv.re" }
        var settingsMods = {
            '#settingsPageNum': ['pixivbiu_searchPageNum', 5, 'æ¯ç»„é¡µæ•°'],
            '#settingsIsOriPic': ['pixivbiu_displayIsOriPic', 'off', 'å¤§å›¾é¢„è§ˆ'],
            '#settingsIsR18': ['pixivbiu_displayIsR18', 'off', 'R18 å†…å®¹'],
            '#settingsSortMode2': ['pixivbiu_sortMode2', '0', 'æ’åºæ¨¡å¼'],
            '#settingsSearchMode': ['pixivbiu_searchMode', 'tag', 'æœç´¢æ¨¡å¼'],
            '#settingsActionType': ['pixivbiu_actionType', 'public', 'æ“ä½œç±»å‹'],
            '#settingsRvrProxyUrl': ['pixivbiu_RvrProxyUrl', biuInfo.pPximgRProxyURL, 'å›¾ç‰‡åä»£åœ°å€'],
            '#settingsIsAiWork': ['pixivbiu_isAiWork', 'on', 'AI ä½œå“'],
        };
        var filtersMods = {
            '#filtersImageWidth': ['pixivbiu_fitlerImWidth', 'å®½åº¦'],
            '#filtersImageHeight': ['pixivbiu_fitlerImHeight', 'é«˜åº¦'],
            '#filtersImageWidthHeightRate': ['pixivbiu_fitlerImWHRate', 'å®½é«˜æ¯”'],
            '#filtersImageTime': ['pixivbiu_filterImTime', 'å‘å¸ƒæ—¶é—´'],
            '#filtersImageType': ['pixivbiu_filterImType', 'ç±»å‹'],
            '#filtersNameTag': ['pixivbiu_filterNaTag', 'æ ‡ç­¾å…³é”®è¯'],
            '#filtersRankDate': ['pixivbiu_filterRkDate', 'æ’è¡Œæ¦œæ—¥æœŸ'],
            '#filtersNumBookmark': ['pixivbiu_filterNmBookmark', 'æ”¶è—æ•°'],
            '#filtersNumView': ['pixivbiu_filterNmView', 'æµè§ˆæ•°'],
        };

        $(document).ready(function () {
            getVersion();
            loadFilters();
            loadSearchSettings();
            progresserDownloading_auto();
            $('#myBox').popmenu();
            $('#codeBox').popmenu();
            $('#rankBox').popmenu();
            loadTooltip();
            const code = getGetArg('code');
            if (code) setTimeout((c = decodeURIComponent(code)) => changeSrhBox(c, 2), 300);
        });

        $('#srhBox').keypress(function (e) {
            if (e.which === 13 && $('#srhBox').val() !== '') {
                srhBoxDo();
            }
        });

        $("#srhBox").bind("input propertychange", function (event) {
            srhBoxStu();
        });

        function srhBoxDo() {
            const c = $('#srhBox').val();
            if ((m = regMatch(/@u=(.*?) -(.)/g, c)).length === 3) {
                const user = m[1];
                const code = m[2];
                if (code === 'i') {
                    $('title').html('TA çš„æ’ç”»');
                    getUserWorks(user, 'illust');
                } else if (code === 'c') {
                    $('title').html('TA çš„æ¼«ç”»');
                    getUserWorks(user, 'manga');
                } else if (code === 'm') {
                    $('title').html('TA çš„æ”¶è—');
                    getMarks(user);
                } else if (code === 'f') {
                    $('title').html('TA çš„å…³æ³¨');
                    getFollowing(user);
                }
            } else if ((m = regMatch(/@s=(.*?) -(.)/g, c)).length === 3) {
                const kt = m[1];
                const code = m[2];
                if (code === 't') {
                    $('title').html(kt + ' - éƒ¨åˆ†æ ‡ç­¾æœç´¢');
                    searchForWorks(kt, 0, 1, 'tag');
                } else if (code === 'o') {
                    $('title').html(kt + ' - å…¨æ ‡ç­¾æœç´¢');
                    searchForWorks(kt, 0, 1, 'otag');
                } else if (code === 'd') {
                    $('title').html(kt + ' - æ ‡é¢˜æˆ–æè¿°æœç´¢');
                    searchForWorks(kt, 0, 1, 'des');
                }
            } else if ((m = regMatch(/@w=(.*?)$/g, c)).length === 2) {
                $('title').html('ä½œå“');
                getOneWork(m[1]);
            } else if ((m = regMatch(/@su=(.*?)$/g, c)).length === 2) {
                $('title').html('ç”¨æˆ·æœç´¢');
                searchForUsers(m[1]);
            } else {
                $('title').html('PixivBiu');
                searchForWorks(c);
            }
            srhBoxStu();
        }

        function srhBoxStu() {
            let code;
            const c = $('#srhBox').val();
            if ((m = regMatch(/@u=(.*?) -(.)/g, c)).length === 3) {
                code = m[2];
                if (code === 'i') {
                    $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ Â· æŸ¥çœ‹ æ’ç”» ä½œå“');
                } else if (code === 'c') {
                    $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ Â· æŸ¥çœ‹ æ¼«ç”» ä½œå“');
                } else if (code === 'm') {
                    $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ Â· æŸ¥çœ‹ æ”¶è— åˆ—è¡¨');
                } else if (code === 'f') {
                    $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ Â· æŸ¥çœ‹ å…³æ³¨ åˆ—è¡¨');
                } else {
                    $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ Â· -i æ’ç”»ã€-c æ¼«ç”»ã€-m æ”¶è—åˆ—è¡¨ã€-f å…³æ³¨åˆ—è¡¨');
                }
            } else if ((m = regMatch(/@s=(.*?) -(.)/g, c)).length === 3) {
                code = m[2];
                if (code === 't') {
                    $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ Â· éƒ¨åˆ†æ ‡ç­¾åŒ¹é…');
                } else if (code === 'o') {
                    $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ Â· å…¨æ ‡ç­¾åŒ¹é…');
                } else if (code === 'd') {
                    $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ Â· æ ‡é¢˜æˆ–æè¿°åŒ¹é…');
                } else {
                    $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ Â· -t éƒ¨åˆ†æ ‡ç­¾åŒ¹é…ã€-o å…¨æ ‡ç­¾åŒ¹é…ã€-d æ ‡é¢˜æˆ–æè¿°åŒ¹é…');
                }
            } else if (regMatch(/@u=(.*?)$/g, c).length === 2) {
                $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ @u={user_id} -[i,c,m,f] Â· æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„ -i æ’ç”»ã€-c æ¼«ç”»ã€-m æ”¶è—åˆ—è¡¨ã€-f å…³æ³¨åˆ—è¡¨');
            } else if (regMatch(/@s=(.*?)$/g, c).length === 2) {
                $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ @s={keyword} -[t,o,d] Â· ä»¥æŒ‡å®šåŒ¹é…æ¨¡å¼æœç´¢ -t éƒ¨åˆ†æ ‡ç­¾åŒ¹é…ã€-o å…¨æ ‡ç­¾åŒ¹é…ã€-d æ ‡é¢˜æˆ–æè¿°åŒ¹é…');
            } else if (regMatch(/@w=(.*?)$/g, c).length === 2) {
                $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ @w={work_id} Â· æŸ¥çœ‹æŒ‡å®š ID çš„ä½œå“');
            } else if (regMatch(/@su=(.*?)$/g, c).length === 2) {
                $('#srhBox').tooltipster('content', 'æŒ‡ä»¤ @su={keyword} Â· æœç´¢ç›¸å…³ç”¨æˆ·');
            } else if (regMatch(/@$/g, c).length === 1) {
                $('#srhBox').tooltipster('content', 'æŒ‡ä»¤é›† Â· @s= æœç´¢æ¨¡å¼ã€@su= æœç´¢ç”¨æˆ·ã€@u= æŒ‡å®šç”¨æˆ·ã€@w= æŒ‡å®šä½œå“');
            } else {
                $('#srhBox').tooltipster('content', 'æœç´¢ Â· å›è½¦æ‰§è¡Œ');
            }
        }

        function grpIdxBoxStu() {
            var c = $('#headerGrpIdxBox').val();
            var oric = $('#headerGrpIdxBox').attr('placeholder');
            var itm = $('#btnHeaderNext');
            var itmi = $('#btnHeaderNext i');
            var txt = 'ä¸‹ä¸€ç»„';
            if (itm.length <= 0) {
                itm = $('#btnHeaderBack');
                itmi = $('#btnHeaderBack i');
                txt = 'è¿”å›';
            }
            if (itm.length <= 0)
                return;
            if (c !== '' && !isNaN(c) && c !== oric) {
                itm.attr('href', 'javascript: grpActChon(\'now\', ' + Number(c) + ');');
                itmi.tooltipster('content', 'è·³è½¬');
            } else {
                itm.attr('href', 'javascript: grpActChon(\'next\');');
                itmi.tooltipster('content', txt);
            }
        }

        function showPics(title = '', reLoadList = ['main', 'header'], c = tmpPageData) {
            let rstHtml = '', kt;
            let headerHtml = '';
            const typeName = {
                "illustration": "å›¾",
                "manga": "æ¼«",
                "ugoira": "åŠ¨",
                "other": "å…¶ä»–"
            };
            if (c.rst && c.rst.data && c.rst.data.length > 0) {
                let i = 0;
                let data = c.rst.data;
                const groupIndex = Number(c['args']['ops']['groupIndex']);

                // æ•´ç†ç»“æœ
                // ç”¨æˆ·ä½œå“ç±»çš„ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º
                if (c.rst.data.length > 0 && c['args']['ops']['method'] === 'userWorks') {
                    let li = '';
                    if (data[0]['author']['is_followed']) {
                        li = '<a id="follow_' + data[0]['author']['id'] + '" href="javascript: doFollow(' + data[0]['author']['id'] + ', \'del\');"><b class="tooltip" title="å–æ¶ˆå…³æ³¨"><hicon>ğŸ’˜</hicon></b></a>';
                    } else {
                        li = '<a id="follow_' + data[0]['author']['id'] + '" href="javascript: doFollow(' + data[0]['author']['id'] + ', \'add\');"><b class="tooltip" title="å…³æ³¨"><hicon>ğŸ’—</hicon></b></a>';
                    }
                    li += '<a target="_blank" href="https://www.pixiv.net/users/' + data[0]['author']['id'] + '"><d class="tooltip" title="æ‰“å¼€ç”»å¸ˆ Pixiv ä¸»é¡µ">Pixiv</d></a>';
                    li += '<a target="_blank" href=".?code=%40u%3D' + data[0]['author']['id'] + '%20-f"><op class="tooltip" title="è·å– TA çš„å…³æ³¨åˆ—è¡¨">å…³æ³¨åˆ—è¡¨</op></a>';
                    li += '<a target="_blank" href=".?code=%40u%3D' + data[0]['author']['id'] + '%20-m"><sf class="tooltip" title="è·å– TA çš„ä½œå“æ”¶è—">ä½œå“æ”¶è—</op></a>';
                    rstHtml += '<article class="thumb"><a class="imageBtn"><img src="' + data[0]['all']['user']['profile_image_urls']['medium'].replace('i.pximg.net', 'i.pixiv.re') + '" alt="" /></a><h2>ç”»å¸ˆ@' + data[0]['author']['name'] + '</h2><section class="thumbAction">' + li + '</section></article>';
                }

                // ç”¨æˆ·åˆ—è¡¨æ•´ç†
                for (i = 0; i < data.length && (c['args']['ops']['method'] === 'userFollowing' || c['args']['ops']['method'] === 'searchUsers'); i++) {
                    let li = '';
                    if (data[i]['is_followed']) {
                        li = '<a id="follow_' + data[i]['id'] + '" href="javascript: doFollow(' + data[i]['id'] + ', \'del\');"><b class="tooltip" title="å–æ¶ˆå…³æ³¨"><hicon>ğŸ’˜</hicon></b></a>';
                    } else {
                        li = '<a id="follow_' + data[i]['id'] + '" href="javascript: doFollow(' + data[i]['id'] + ', \'add\');"><b class="tooltip" title="å…³æ³¨"><hicon>ğŸ’—</hicon></b></a>';
                    }
                    li += '<a target="_blank" href=".?code=%40u%3D' + data[i]['id'] + '%20-i"><d class="tooltip" title="è·å– TA çš„æ’ç”»ä½œå“">æ’ç”»</d></a>';
                    li += '<a target="_blank" href=".?code=%40u%3D' + data[i]['id'] + '%20-c"><op class="tooltip" title="è·å– TA çš„æ¼«ç”»ä½œå“">æ¼«ç”»</d></a>';
                    rstHtml += '<article class="thumb"><a class="imageBtn"><img src="' + data[i]['profile_image_urls']['medium'].replace('i.pximg.net', 'i.pixiv.re') + '" alt="" /></a><h2>' + data[i]['name'] + '</h2><section class="thumbAction">' + li + '</section></article>';
                }

                // æ’åº
                const _st_mode = String(tmpSearchSettings["pixivbiu_sortMode2"]);
                if (_st_mode && (c.args.ops.method === "works" || (_st_mode[1] && _st_mode[1] === "s"))) {
                    const _type = Number(_st_mode[0]);
                    data.sort((a, b) => {
                        if (_type === 0) return b.total_bookmarked - a.total_bookmarked;
                        if (_type === 1) return b.total_viewed - a.total_viewed;
                        if (_type === 2) return a.created_time < b.created_time;
                        if (_type === 3) return a.created_time > b.created_time;
                        if (_type === 4) return (b.total_bookmarked / b.total_viewed) - (a.total_bookmarked / a.total_viewed);
                    });
                }

                // é€šç”¨ä½œå“æ•´ç†
                for (i = 0; i < data.length && (c['args']['ops']['method'] !== 'userFollowing' && c['args']['ops']['method'] !== 'searchUsers'); i++) {
                    // ç­›é€‰
                    if (["works", "recommend", "rank", "newToMe", "userWorks", "userMarks"].includes(c.args.ops.method)) {
                        const _im_width = tmpFilters["pixivbiu_fitlerImWidth"].split(":");
                        const _im_height = tmpFilters["pixivbiu_fitlerImHeight"].split(":");
                        const _im_whrate = tmpFilters["pixivbiu_fitlerImWHRate"].split(":");
                        const _im_time = tmpFilters["pixivbiu_filterImTime"].split(":");
                        const _im_type = splitNoEmpty(tmpFilters["pixivbiu_filterImType"], ",");
                        const _name_tag = splitNoEmpty(tmpFilters["pixivbiu_filterNaTag"], ",");
                        const _nm_bookmark = tmpFilters["pixivbiu_filterNmBookmark"].split(":");
                        const _nm_view = tmpFilters["pixivbiu_filterNmView"].split(":");
                        if (_im_width.length === 2) {
                            const min = _im_width[0];
                            const max = _im_width[1];
                            if (min && data[i].all.width < Number(min)) continue;
                            if (max && data[i].all.width > Number(max)) continue;
                        }
                        if (_im_height.length === 2) {
                            const min = _im_height[0];
                            const max = _im_height[1];
                            if (min && data[i].all.height < Number(min)) continue;
                            if (max && data[i].all.height > Number(max)) continue;
                        }
                        if (_im_whrate.length === 2) {
                            const im_rate = data[i].all.width / data[i].all.height;
                            console.log(im_rate)
                            const mins = _im_whrate[0].split("/");
                            const maxs = _im_whrate[1].split("/");
                            if (mins.length === 2 && im_rate < Number(mins[0]) / Number(mins[1])) continue;
                            if (maxs.length === 2 && im_rate > Number(maxs[0]) / Number(maxs[1])) continue;
                        }
                        if (_nm_bookmark.length === 2) {
                            const min = _nm_bookmark[0];
                            const max = _nm_bookmark[1];
                            if (min && data[i].total_bookmarked < Number(min)) continue;
                            if (max && data[i].total_bookmarked > Number(max)) continue;
                        }
                        if (_nm_view.length === 2) {
                            const min = _nm_view[0];
                            const max = _nm_view[1];
                            if (min && data[i].total_viewed < Number(min)) continue;
                            if (max && data[i].total_viewed > Number(max)) continue;
                        }
                        if (_im_time.length > 0) {
                            const min = _im_time[0];
                            const max = _im_time[1];
                            const time = Number(data[i].created_time.replaceAll("-", "").split(" ")[0]);
                            if (min && time < Number(min.replaceAll("-", ""))) continue;
                            if (max && time > Number(max.replaceAll("-", ""))) continue;
                        }
                        if (_im_type.length > 0) {
                            let isNeed = false;
                            for (let j = 0; j < _im_type.length; j++) {
                                const type = _im_type[j].trim();
                                if (type[0] && type[0] === data[i].type[0]) {
                                    isNeed = true
                                    if (type[1] && type[1] === "o" && data[i].all.meta_pages.length > 0)
                                        isNeed = false
                                    if (type[1] && type[1] === "s" && data[i].all.meta_pages.length <= 0)
                                        isNeed = false
                                    break;
                                }
                            }
                            if (!isNeed) continue;
                        }
                        if (_name_tag.length > 0) {
                            let isNeed = true;
                            for (let j = 0; j < _name_tag.length; j++) {
                                let tag = _name_tag[j].trim().toLowerCase();
                                const shouleBe = tag[0] == "!" ? false : true;
                                if (!shouleBe) tag = tag.substring(1);
                                let _isNeed = !shouleBe;
                                for (let k = 0; k < data[i].tags.length; k++) {
                                    if (data[i].tags[k].toLowerCase().includes(tag)) {
                                        _isNeed = !_isNeed;
                                        break;
                                    }
                                }
                                isNeed = isNeed && _isNeed;
                                if (!isNeed) break;
                            }
                            if (!isNeed) continue;
                        }
                    }

                    var extra = '';
                    var imgUrlCover = data[i]['image_urls']['medium'].replace('https://i.pximg.net', tmpSearchSettings['pixivbiu_RvrProxyUrl']);
                    var imgUrl = data[i]['image_urls']['large'].replace('https://i.pximg.net', tmpSearchSettings['pixivbiu_RvrProxyUrl']);
                    var bookedNum = data[i]['total_bookmarked'];

                    if (data[i]['all']['meta_pages'].length > 0) {
                        typeName['illustration'] = 'å¤šå›¾';
                        typeName['manga'] = 'æ¼«ç”»';
                        extra += '<a target="_blank" href=".?code=%40w%3D' + data[i]['id'] + '"><op class="tooltip" title="æŸ¥çœ‹å®Œæ•´ä½œå“">ğŸ‘€</op></a>';
                    } else {
                        typeName['illustration'] = 'å›¾';
                        typeName['manga'] = 'å•æ¼«';
                    }

                    if (tmpSearchSettings['pixivbiu_displayIsOriPic'] !== 'on')
                        imgUrl = imgUrlCover;

                    // æ”¶è—æŒ‰é’®
                    if (data[i]['is_bookmarked']) {
                        extra += `<a id="marks_${data[i]["id"]}" href="javascript: doBookmark(${data[i]["id"]});"><b class="tooltip" title="å–æ¶ˆæ”¶è—"><hicon>ğŸ’˜</hicon> ${bookedNum}</b></a>`;
                    } else {
                        extra += `<a id="marks_${data[i]["id"]}" href="javascript: doBookmark(${data[i]["id"]});"><b class="tooltip" title="æ”¶è—"><hicon>ğŸ’—</hicon> ${bookedNum}</b></a>`;
                    }

                    // ä¸‹è½½å½’ç±»ç”¨çš„æ–‡ä»¶å¤¹åç§°
                    if (c['args']['fun']['kt']) {
                        kt = c['args']['fun']['kt'];
                    } else if (c['args']['ops']['method'] === 'userWorks') {
                        kt = 'ç”»å¸ˆ@' + data[0]['author']['id'];
                    } else if (c['args']['ops']['method'] === 'userMarks') {
                        kt = 'æ”¶è—@' + c['args']['fun']['userID'];
                    } else if (c['args']['ops']['method'] === 'rank') {
                        kt = 'æ’è¡Œæ¦œ@' + c['args']['fun']['mode'];
                    } else if (c['args']['ops']['method'] === 'oneWork') {
                        kt = 'ä½œå“';
                    } else {
                        kt = c['args']['ops']['method'];
                    }
                    kt = kt.replaceAll('"', '_').replaceAll('\'', '_');

                    // ä¸‹è½½æŒ‰é’®
                    extra += '<a id="dl_' + data[i]['id'] + '" href="javascript: doDownloadPic(\'' + kt + '\', ' + data[i]['id'] + ', ' + String(i) + ');"><d class="tooltip" title="ä¸‹è½½">' + typeName[data[i]['type']] + '</d></a>';

                    // å›¾ç‰‡é¢„è§ˆå†…å®¹
                    var extraText = '<a target="_blank" href=".?code=%40u%3D' + data[i]['author']['id'] + '%20-i">ğŸ” ä½œè€…æ’ç”»</a> <a target="_blank" href=".?code=%40u%3D' + data[i]['author']['id'] + '%20-c">ğŸ” æ¼«ç”»</a> <a href="javascript: doDownloadPic(\'' + kt + '\', ' + data[i]['id'] + ', ' + String(i) + ');">â¬ ä¸‹è½½</a>';
                    if (data[i]['all']['meta_pages'].length > 0) {
                        extraText = '<a target="_blank" href=".?code=%40w%3D' + data[i]['id'] + '">ğŸ‘€ æŸ¥çœ‹</a> ' + extraText;
                    }

                    // å›¾ç‰‡ä¿¡æ¯å±•ç¤º
                    var desText = '<h2><a style="border-bottom: solid 1px;" target="_blank" href="https://www.pixiv.net/artworks/' + data[i]['id'] + '">' + maybeXSS(data[i]['title']) + '</a></h2><p>Created by <a style="border-bottom: solid 1px;" target="_blank" href="https://www.pixiv.net/users/' + data[i]['author']['id'] + '">' + maybeXSS(data[i]['author']['name']) + '</a> on ' + data[i]['created_time'] + '<br>æ”¶è—@' + data[i]['total_bookmarked'] + 'ï¼Œæµè§ˆ@' + data[i]['total_viewed'] + '</p>';
                    //// æ ‡ç­¾
                    var tagss = '<p style="max-width: 25%;">';
                    for (let kk = 0; kk < data[i]['tags'].length; kk++) {
                        tagss = tagss + '<a target="_blank" href=".?code=%40s%3D' + maybeEncode(data[i]['tags'][kk]) + ' -o">#' + maybeXSS(data[i]['tags'][kk]) + '</a> ';
                    }
                    desText = tagss + '</p>' + desText;

                    if (c['args']['ops']['method'] === 'oneWork' && i !== 0) {
                        extra = '';
                        extraText = '';
                        desText = '';
                    }

                    extraClass = "";

                    // R18 è¿‡æ»¤
                    if (data[i]['all']['x_restrict'] > 0) {
                        if (tmpSearchSettings['pixivbiu_displayIsR18'] === "gone") continue;
                        if (tmpSearchSettings['pixivbiu_displayIsR18'] === "off") extraClass += ' mask-r18';
                    } else {
                        if (tmpSearchSettings['pixivbiu_displayIsR18'] === "only") continue;
                    }

                    // æœ€ç»ˆç»“æœ
                    rstHtml += '<article id="art_' + data[i]['id'] + '" class="thumb"><a href="' + imgUrl + '" class="image' + extraClass + '"><img src="' + imgUrlCover + '" alt="' + data[i]['title'] + '" /></a>' + desText + '<p>' + extraText + '</p><section class="thumbAction">' + extra + '</section></article>';
                }

                // ç­›é€‰
                const _filterClass = checkCookies(Object.keys(filtersMods), filtersMods) ? " weight-6" : "";
                headerHtml += '<li><a href="javascript: togglePanel(\'#filter\');" class="label-btn-filter' + _filterClass + '">ç­›é€‰</a></li>';

                // ä¸€é”®ä¸‹è½½
                headerHtml += '<li><a class="tooltip" href="javascript: dlPageAll();" title="ä¸‹è½½æœ¬é¡µæ‰€æœ‰å›¾ç‰‡ï¼ˆåŸå›¾ï¼‰">ä¸‹è½½</a></li>';

                // ç¼“å­˜æ–‡ä»¶
                if (tmpCode === 2) {
                    headerHtml += '<li><a href="javascript: searchForWorks(\'\', ' + groupIndex + ', 0);">åˆ·æ–°ç¼“å­˜</a></li>';
                } else {
                    headerHtml += '<li><a href="javascript: grpActChon(\'now\');">åˆ·æ–°</a></li>';
                }

                // è¿”å›æŒ‰é’®
                if (groupIndex > 0) {
                    headerHtml += '<li><a id="btnHeaderBack" href="javascript: grpActChon(\'back\');"><i class="icon solid fa-chevron-circle-left tooltip" title="è¿”å›"></i></a></li>';
                } else if (groupIndex === 0) {
                    headerHtml += '<li><a href="."><i class="icon solid fa-home tooltip" title="ä¸»é¡µ"></i></a></li>';
                }

                // ç»„åºå·è¾“å…¥æ¡†
                if (c['args']['ops']['method'] !== 'userMarks') {
                    headerHtml += '<li><input oninput="grpIdxBoxStu();" id="headerGrpIdxBox" class="tooltip" placeholder="' + c['args']['ops']['groupIndex'] + '" autocomplete="off" title="ç»„åºå·"></li>';
                }

                // ä¸‹ä¸€ç»„æŒ‰é’®
                if (data.length !== 0) {
                    headerHtml += '<li><a id="btnHeaderNext" href="javascript: grpActChon(\'next\');"><i class="icon solid fa-chevron-circle-right tooltip" title="ä¸‹ä¸€ç»„"></i></a></li>';
                } else {
                    rstHtml = btnGetHTML('none');
                }

                // è¾“å‡º
                if (rstHtml === "")
                    rstHtml = "<div style='width: 100%; text-align: center;'><h2>åœ¨æ­¤ç­›é€‰æ¡ä»¶ä¸‹å°±æ²¡æœ‰ä½œå“äº†...<h2></div>";
                $('#main').html(rstHtml);

                if ($.inArray('header', reLoadList) >= 0) {
                    $('#rstHeaderShow').html(headerHtml);
                }

                reMainJs(jQuery, reLoadList);
            } else {
                $('#main').html(btnGetHTML('none'));
                reMainJs(jQuery, ['main']);
            }
            // åŠ¨ç”»è¿‡æ¸¡
            window.setTimeout(function () {
                $('body').removeClass('is-preload');
                if (title !== '') {
                    $('.search-area').addClass('search-area-by');
                    $('#srhBox').attr('placeholder', title);
                }
            }, 100);
            loadTooltip();
        }
    </script>
</body>

</html>